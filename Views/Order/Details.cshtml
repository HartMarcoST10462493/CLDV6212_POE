@model ABCRetailers.Models.Order
@{
    ViewData["Title"] = "Order Details";
}

<h1>Order Details</h1>
<div>
    <h4>Order Information</h4>
    <hr />
    <dl class="row">
        <dt class="col-sm-3">
            Order ID
        </dt>
        <dd class="col-sm-9">
            @Model.RowKey
        </dd>

        <dt class="col-sm-3">
            Customer
        </dt>
        <dd class="col-sm-9">
            @Model.Username
        </dd>

        <dt class="col-sm-3">
            Product
        </dt>
        <dd class="col-sm-9">
            @Model.ProductName
        </dd>

        <dt class="col-sm-3">
            Order Date
        </dt>
        <dd class="col-sm-9">
            @Model.OrderDate.LocalDateTime.ToString("MM/dd/yyyy hh:mm tt")
        </dd>

        <dt class="col-sm-3">
            Quantity
        </dt>
        <dd class="col-sm-9">
            @Model.Quantity
        </dd>

        <dt class="col-sm-3">
            Unit Price
        </dt>
        <dd class="col-sm-9">
            $@Model.UnitPrice.ToString("N2")
        </dd>

        <dt class="col-sm-3">
            Total Price
        </dt>
        <dd class="col-sm-9">
            <strong>$@Model.TotalPrice.ToString("N2")</strong>
        </dd>

        <dt class="col-sm-3">
            Status
        </dt>
        <dd class="col-sm-9">
            <span class="badge bg-@(Model.Status == "Completed" ? "success" :
                                                  Model.Status == "Processing" ? "warning" :
                                                  Model.Status == "Cancelled" ? "danger" : "secondary")">
                @Model.Status
            </span>
        </dd>
    </dl>
</div>

<div class="mt-4">
    @Html.ActionLink("Edit Order", "Edit", new { partitionKey = Model.PartitionKey, rowKey = Model.RowKey }, new { @class = "btn btn-primary" })

    <!-- Add Payment Button if order is pending -->
    @if (Model.Status == "Pending")
    {
        <a href="@Url.Action("Create", "Payment", new { orderId = Model.RowKey })" class="btn btn-success">Proceed to Payment</a>
    }

    <a asp-action="Index" class="btn btn-secondary">Back to Orders</a>
</div>